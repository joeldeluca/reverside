<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>REVERside — Chargement…</title>
  <meta http-equiv="cache-control" content="no-cache" />
  <style>
    body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Arial; margin:0; background:#0b1220; color:#fff;}
    .wrap{min-height:100vh; display:flex; align-items:center; justify-content:center; padding:24px;}
    .card{max-width:520px; width:100%; background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.12);
      border-radius:18px; padding:18px 16px;}
    .muted{opacity:.85; line-height:1.35}
    a{color:#9bd; font-weight:700}
    .btns{display:flex; gap:10px; flex-wrap:wrap; margin-top:14px}
    .btn{display:inline-block; padding:10px 12px; border-radius:999px; background:rgba(255,255,255,.12);
      border:1px solid rgba(255,255,255,.18); text-decoration:none}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div style="font-size:18px;font-weight:800;margin-bottom:6px">Chargement de REVERside…</div>
      <div class="muted">
        Redirection automatique en cours. Si rien ne se passe, utilise un lien direct ci-dessous.
      </div>
      <div class="btns">
        <a class="btn" id="linkMobile" href="./iphone5j_ui/play.html">Ouvrir version iPhone</a>
        <a class="btn" id="linkDesk" href="./play.html">Ouvrir version Desktop</a>
      </div>
      <div class="muted" style="margin-top:10px;font-size:13px">
        Astuce : si tu arrives ici depuis un favori ancien, supprime le favori et recrée-le sur <b>/reverside/</b>.
      </div>
    </div>
  </div>

<script>
(function(){
  const q = location.search || "";
  const h = location.hash || "";
  const ua = navigator.userAgent || "";
  const isIOS = /iPad|iPhone|iPod/.test(ua) || (navigator.platform === "MacIntel" && navigator.maxTouchPoints > 1);
  const isAndroid = /Android/.test(ua);
  const isMobile = isIOS || isAndroid || (matchMedia && matchMedia("(max-width: 900px)").matches);

  // Cibles (relatives au dossier /reverside/)
  const targetMobile = "./iphone5j_ui/play.html" + q + h;
  const targetDesk   = "./play.html" + q + h;

  // Mets à jour les liens de fallback
  document.getElementById("linkMobile").href = targetMobile;
  document.getElementById("linkDesk").href   = targetDesk;

  // Redirection
  const target = isMobile ? targetMobile : targetDesk;

  // Sécurité anti-boucle : si on est déjà sur la cible, ne rien faire
  const here = location.pathname.replace(/\/+$/,"");
  const want = (isMobile ? "/reverside/iphone5j_ui/play.html" : "/reverside/play.html").replace(/\/+$/,"");
  if (here.endsWith(want)) return;

  // Redirection immédiate
  location.replace(target);

  // Fallback : si Safari n’a pas redirigé (cas rare), on laisse les boutons
})();
</script>
</body>
</html>
